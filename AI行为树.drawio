<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36" version="29.2.4">
  <diagram name="第 1 页" id="_zMOHDMj_IDJZ2Gv6XkA">
    <mxGraphModel dx="1100" dy="546" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="LzOZ260-tQ3Y5i_Tqr5b-1" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="root Node" vertex="1">
          <mxGeometry height="80" width="80" x="40" y="200" as="geometry" />
        </mxCell>
        <mxCell id="LzOZ260-tQ3Y5i_Tqr5b-2" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="nodeList" vertex="1">
          <mxGeometry height="60" width="120" x="30" y="10" as="geometry" />
        </mxCell>
        <mxCell id="LzOZ260-tQ3Y5i_Tqr5b-3" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="" vertex="1">
          <mxGeometry height="60" width="120" x="150" y="10" as="geometry" />
        </mxCell>
        <mxCell id="LzOZ260-tQ3Y5i_Tqr5b-4" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="decoratorList" vertex="1">
          <mxGeometry height="60" width="120" x="30" y="90" as="geometry" />
        </mxCell>
        <mxCell id="LzOZ260-tQ3Y5i_Tqr5b-5" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="" vertex="1">
          <mxGeometry height="60" width="120" x="150" y="90" as="geometry" />
        </mxCell>
        <mxCell id="LzOZ260-tQ3Y5i_Tqr5b-6" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="nodeFactory" vertex="1">
          <mxGeometry height="60" width="120" x="160" y="210" as="geometry" />
        </mxCell>
        <mxCell id="LzOZ260-tQ3Y5i_Tqr5b-7" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="" vertex="1">
          <mxGeometry height="80" width="80" x="390" y="20" as="geometry" />
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-1" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="直接输出目标&lt;br&gt;先不搞行为树" vertex="1">
          <mxGeometry height="60" width="120" x="380" y="540" as="geometry" />
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-2" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="直接读取环境变量，然后更新状态机" vertex="1">
          <mxGeometry height="60" width="120" x="180" y="540" as="geometry" />
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-3" edge="1" parent="1" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="310" y="570" as="sourcePoint" />
            <mxPoint x="370" y="570" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-5" edge="1" parent="1" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="520" y="570" as="sourcePoint" />
            <mxPoint x="600" y="570" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-7" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="作用到NPC" vertex="1">
          <mxGeometry height="60" width="120" x="610" y="540" as="geometry" />
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-8" parent="1" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;" value="环境感知" vertex="1">
          <mxGeometry height="60" width="120" x="10" y="540" as="geometry" />
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-9" edge="1" parent="1" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="130" y="570" as="sourcePoint" />
            <mxPoint x="180" y="570" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-10" parent="1" style="text;whiteSpace=wrap;html=1;" value="&lt;span style=&quot;color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(236, 236, 236); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;&quot;&gt;输出计划&lt;/span&gt;" vertex="1">
          <mxGeometry height="20" width="50" x="310" y="530" as="geometry" />
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-11" edge="1" parent="1" source="MOzzzRUpAzljYCfOQZ9g-7" style="curved=1;endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.447;entryY=1.02;entryDx=0;entryDy=0;entryPerimeter=0;" target="MOzzzRUpAzljYCfOQZ9g-8" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <Array as="points">
              <mxPoint x="560" y="700" />
              <mxPoint x="130" y="660" />
            </Array>
            <mxPoint x="660" y="780" as="sourcePoint" />
            <mxPoint x="710" y="730" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-12" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="给AI的goap行为构建行为树，单次goap未完成之前，不会频繁更新" vertex="1">
          <mxGeometry height="60" width="190" x="290" y="450" as="geometry" />
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-13" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="当处理目标变化过快情况下的决策，如果等待上一次的决策执行结束后，再修改决策会让AI显得很笨。因此通过几个策略，提前修改决策，例如，当目标变化的值超过一定阈值，或者超时更新决策，或者AI收到外部的攻击，更新决策，等等" vertex="1">
          <mxGeometry height="90" width="300" x="240" y="700" as="geometry" />
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-14" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="AI状态机，&lt;br&gt;直接同步读取状态" vertex="1">
          <mxGeometry height="60" width="120" x="110" y="880" as="geometry" />
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-15" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="状态切换，&lt;br&gt;输出新状态的行动计划" vertex="1">
          <mxGeometry height="60" width="120" x="290" y="880" as="geometry" />
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-16" edge="1" parent="1" source="MOzzzRUpAzljYCfOQZ9g-14" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="240" y="960" as="sourcePoint" />
            <mxPoint x="290" y="910" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-17" edge="1" parent="1" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="410" y="909.76" as="sourcePoint" />
            <mxPoint x="470" y="909.76" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-18" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="业务侧根据行动计划写业务，解耦合" vertex="1">
          <mxGeometry height="60" width="120" x="470" y="880" as="geometry" />
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-19" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="" vertex="1">
          <mxGeometry height="240" width="455" x="125" y="1280" as="geometry" />
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-20" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="" vertex="1">
          <mxGeometry height="225" width="210" x="125" y="1280" as="geometry" />
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-21" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="OnUpdate&lt;br&gt;状态转换的回调" vertex="1">
          <mxGeometry height="60" width="120" x="125" y="1425" as="geometry" />
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-37" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="Onleave&lt;div&gt;离开这个状态的回调&lt;/div&gt;" vertex="1">
          <mxGeometry height="60" width="120" x="125" y="1305" as="geometry" />
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-38" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" value="OnEnter&lt;br&gt;进入这个状态的回调" vertex="1">
          <mxGeometry height="60" width="120" x="125" y="1365" as="geometry" />
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-43" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="状态类" vertex="1">
          <mxGeometry height="80" width="80" x="255" y="1352.5" as="geometry" />
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-45" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" value="状态机" vertex="1">
          <mxGeometry height="80" width="80" x="500" y="1280" as="geometry" />
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-46" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="有限的几种状态之间的可转换的顺序是写死的，在尝试转换状态时，需要判断是否满足" vertex="1">
          <mxGeometry height="30" width="260" x="140" y="1540" as="geometry" />
        </mxCell>
        <mxCell id="MOzzzRUpAzljYCfOQZ9g-47" edge="1" parent="1" source="MOzzzRUpAzljYCfOQZ9g-20" style="curved=1;endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;" target="MOzzzRUpAzljYCfOQZ9g-46" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <Array as="points">
              <mxPoint x="400" y="1460" />
              <mxPoint x="400" y="1510" />
            </Array>
            <mxPoint x="400" y="1560" as="sourcePoint" />
            <mxPoint x="450" y="1510" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
